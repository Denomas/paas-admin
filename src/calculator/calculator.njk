{% extends "../layouts/govuk.njk" %}
{% from "@govuk-frontend/frontend/components/button/macro.njk" import govukButton %}
{% from "@govuk-frontend/frontend/components/input/macro.njk" import govukInput %}
{% from "@govuk-frontend/frontend/components/radios/macro.njk" import govukRadios %}
{% from "@govuk-frontend/frontend/components/select/macro.njk" import govukSelect %}

{% block page_title %}
  Pricing calculator
{% endblock %}

{% block main %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-half">
      <h1 class="paas-heading-l">Estimate your monthly costs</h1>

      <p class="paas-calculator-lede">
        Service teams usually run 3 environments, such as:<br>
        Production, Integration and Staging.
      </p>

      <h2>Environment <span class="paas-example">(e.g. Production)</span></h1>
    </div>
  </div>

  <div class ="govuk-grid-row paas-pricing-calculator">
    <div class="govuk-grid-column-two-thirds" data-module="accordion-with-descriptions">
    <form class="paas-pricing-form" method="get">
      <input type="hidden" name="estimate" value="{{ estimate | dump }}">

      {% for service, plans in services %}
        <div class="paas-pricing-section">
          <div class="subsection__header">
            <h2 class="subsection__title"">{{ service }}</h2>
          </div>
          <section class="subsection__content govuk-grid-row">
            <div class="govuk-grid-column-one-half">
              <p>version 9.2</p>
            </div>
            <div class="govuk-grid-column-one-half govuk-grid-row">
              <div class="govuk-grid-column-two-thirds">
              {{ govukSelect({
                id: "select-1",
                name: "select-1",
                items: [
                  {
                    value: 1,
                    text: "GOV.UK frontend option 1"
                  },
                  {
                    value: 2,
                    text: "GOV.UK frontend option 2",
                    selected: true
                  },
                  {
                    value: 3,
                    text: "GOV.UK frontend option 3"
                  }
                ]
              }) }}
              </div>
              <div class="govuk-grid-column-one-third">
                <button class="govuk-button" type="submit">+Add</button>
              </div>
            </div>
          </section>
          <section class="subsection__content govuk-grid-row">
            <div class="govuk-grid-column-one-half">
              <p>version 9.2</p>
            </div>
            <div class="govuk-grid-column-one-half govuk-grid-row">
              <div class="govuk-grid-column-two-thirds">
              {{ govukSelect({
                id: "select-1",
                name: "select-1",
                items: [
                  {
                    value: 1,
                    text: "GOV.UK frontend option 1"
                  },
                  {
                    value: 2,
                    text: "GOV.UK frontend option 2",
                    selected: true
                  },
                  {
                    value: 3,
                    text: "GOV.UK frontend option 3"
                  }
                ]
              }) }}
              </div>
              <div class="govuk-grid-column-one-third">
                <button class="govuk-button" type="submit">+Add</button>
              </div>
            </div>
          </section>
        </div>
      {% endfor %}
    </div>

    <div class="govuk-grid-column-one-third paas-summary-section">
      <h4>Estimated cost summary</h4>

        <p>
          Following prices are <strong>excluding vat</strong>.
        </p>

        <ul>
          {% for quote in quota.instances %}
            <li>
              {{ quote.resourceType }} - {{ quote.resourceName }}: {{ quote.price.exVAT | currency(2) }}
              <button type="submit" name="remove[]" value="{{ quote.resourceGUID }}">remove</button>
            </li>
          {% endfor %}
        </ul>

        <p class="paas-total">Total estimated cost:</p>

        <p class="paas-price">£{{ quota.exVAT | currency(2) }}</p>
        <p class="paas-month">per month</p>

        <details>
          <summary>Why this cost might vary</summary>

          <p>This estimate assumes constant usage at the levels you've provided. Final figures will vary as CPU/Postgres/ MySQL are charged based on hourly consumption and exchange rates will fluctuate.</p>

          <p>This cost estimate is dated: 26.01.2017 – 15:23. Estimates are liable to change over time.</p>
        </details>
      </div>
    </form>
  </div>

  {{ params | dump }}

{% endblock %}
