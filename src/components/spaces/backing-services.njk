{% extends "./_tabbed_layout.njk" %}

{% block pageTitle %}
  {{ space.entity.name }} - Overview
{% endblock %}

{% block insideTabs %}
    <p class="govuk-body">
      This space contains
      {{ services | length }}
      backing service{% if services.length != 1 %}s{% endif %}
    </p>

  {% if services.length > 0 %}

    <table class="govuk-table">
      <thead class="govuk-table__head">
        <tr class="govuk-table__row">
          <th class="govuk-table__header name" scope="col">Service name</th>
          <th class="govuk-table__header" scope="col">Type</th>
          <th class="govuk-table__header" scope="col">Plan</th>
          <th class="govuk-table__header" scope="col">State</th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        {% for service in services %}
          <tr class="govuk-table__row">
            <td class="govuk-table__cell">
              <a href="{{ linkTo('admin.organizations.spaces.services.view', {organizationGUID: organization.metadata.guid, spaceGUID: space.metadata.guid, serviceGUID: service.metadata.guid}) }}" class="govuk-link">{{ service.entity.name }}</a>
            </td>
            <td class="govuk-table__cell">
              {{ service.definition.entity.label | default('User Provided Service') }}
            </td>
            <td class="govuk-table__cell">
              {{ service.plan.entity.name | default('N/A') }}
            </td>
            <td class="govuk-table__cell">
              {{ service.entity.last_operation.state | default('N/A') }}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}

{% endblock %}
