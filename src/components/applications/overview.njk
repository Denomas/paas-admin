{% extends "../../layouts/govuk.njk" %}
{% from "govuk-frontend/components/table/macro.njk" import govukTable %}
{% from "govuk-frontend/components/back-link/macro.njk" import govukBackLink %}

{% block pageTitle %}
  {{ application.entity.name }} - Application Overview
{% endblock %}

{% block content %}
  {{ super() }}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {{ govukBackLink({
        text: 'Space: ' + space.entity.name,
        href: linkTo('admin.organizations.spaces.applications.list', {organizationGUID: organization.metadata.guid, spaceGUID: space.metadata.guid})
      }) }}

      <h1 class="govuk-heading-xl">
        <span class="govuk-caption-xl">Application</span>
        {{ application.entity.name }}
      </h1>

      {{ govukTable({
        caption: 'Application details',
        firstCellIsHeader: false,
        rows: [
          [
            {
              text: 'Name'
            },
            {
              text: application.entity.name
            }
          ],
          [
            {
              text: 'Detected Buildpack'
            },
            {
              text: application.entity.detected_buildpack
            }
          ],
          [
            {
              text: 'Instances'
            },
            {
              text: application.entity.running_instances + '/' + application.entity.instances
            }
          ],
          [
            {
              text: 'Memory'
            },
            {
              text: (application.entity.memory / 1024) | round(2) + 'gb'
            }
          ],
          [
            {
              text: 'Disk quota'
            },
            {
              text: (application.entity.disk_quota / 1024) | round(2) + 'gb'
            }
          ],
          [
            {
              text: 'Status'
            },
            {
              text: application.entity.state
            }
          ],
          [
            {
              text: 'SSH'
            },
            {
              text: application.entity.enable_ssh
            }
          ],
          [
            {
              text: 'URLs'
            },
            {
              text: application.entity.urls | join(", ")
            }
          ],
          [
            {
              text: 'Ports'
            },
            {
              text: application.entity.ports
            }
          ]
        ]
      }) }}

      <h4 class="govuk-heading-s">On the commandline</h4>

      <p>You can also view the same information on the commandline, to see details for all of your apps use:</p>

      <p>
        <code>cf apps</code>
      </p>

      <a href="https://docs.cloud.service.gov.uk/get_started.html#set-up-the-cloud-foundry-command-line" class="govuk-link">
        Read more about using PaaS on the commandline.
      </a>
    </div>
  </div>
{% endblock %}
